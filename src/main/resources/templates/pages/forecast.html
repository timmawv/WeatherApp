<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Forecast</title>
    <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/439/439842.png"/>
    <link type="text/css" rel="stylesheet" href="/WeatherApp-1.0/styles/css/main-page.css"/>
    <link type="text/css" rel="stylesheet" href="/WeatherApp-1.0/styles/css/forecast.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
</head>
<body>
<header th:insert="~{fragment/header :: header}"></header>

<main>

    <div th:insert="~{fragment/forecast_week :: forecast_block}"></div>

</main>

<footer th:insert="~{fragment/footer :: footer}"></footer>


<script>
    const tempElement = document.querySelector('.temp').value;
    let tempArray;
    tempArray = JSON.parse(tempElement);
    const maxValue = Math.max(...tempArray) + 10;
    const minValue = Math.min(...tempArray) - 10;


    const timeElement = document.querySelector('.time');
    let timeValue = timeElement.value;
    timeValue = timeValue.slice(1, -1);
    const timeArray = timeValue.split(',');


    new Chart("myChart", {
        type: "line",
        data: {
            labels: timeArray,
            datasets: [{
                data: tempArray,
                borderColor: "red",
                fill: true
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        min: minValue,
                        max: maxValue,
                    }
                }]
            },
            title: {
                display: true,
                text: 'Hourly forecast'
            },
            legend: {
                display: false
            },
        }
    });
</script>

</body>
</html>